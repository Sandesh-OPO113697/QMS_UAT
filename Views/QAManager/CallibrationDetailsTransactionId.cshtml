@using System.Data
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@model System.Data.DataTable

@{
    var groupedData = Model.AsEnumerable()
        .GroupBy(row => row["TransactionID"].ToString());
}

<style>
    body {
        font-family: 'Segoe UI', sans-serif;
        background-color: #f7f7f7;
    }

    .scrollable-table {
        overflow-x: auto;
        margin: 30px 0;
        background: #ffffff;
        border: 1px solid #ccc;
        border-radius: 6px;
        padding: 10px;
    }

    table {
        border-collapse: collapse;
        width: 100%;
        min-width: 1000px;
    }

    th, td {
        border: 1px solid #ccc;
        padding: 10px 8px;
        text-align: center;
        font-size: 14px;
        color: #333;
    }

    thead tr:first-child th {
        background-color: #f2f2f2;
        font-size: 15px;
        font-weight: 600;
    }

    thead tr:nth-child(2) th {
        background-color: #f9f9f9;
        font-weight: 500;
    }

    tbody tr:nth-child(even) {
        background-color: #fcfcfc;
    }

 

    tfoot td {
        background-color: #f5f5f5;
        font-weight: 600;
        color: #222;
    }

    td[colspan="3"] {
        text-align: right;
        background-color: #f5f5f5;
    }

    td strong {
        color: #000;
    }
</style>


<div class="card shadow mb-4">
    <div class="card-header">
        <strong class="card-title">Pending Feedback Dispute</strong>
    </div>
    <div class="card-body">
        <table class="table table-bordered" style="color:#333">
            <thead >
                <tr>
                    <th style="width: 30%; font:bold;color:black">Transaction ID</th>
                    <th style="width: 50%;font:bold;color:black">Participants</th>
                    <th style="width: 20%;font:bold ;color:black">Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var group in groupedData)
                {
                    var transactionId = group.Key;
                    <tr>
                        <td class="align-middle">@transactionId</td>
                        <td>
                            <table class="table table-sm  mb-0">
                                <thead class="thead-light">
                                    <tr style="background-color: #2a2c4a;color: white;">
                                        <th>Participant</th>
                                        <th>Is Attempt</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var row in group)
                                    {
                                        <tr >
                                            <td style="background-color: #2a2c4a;color: white;" >@row["Participants"]</td>
                                            <td style="background-color: #2a2c4a;color: white;" >@row["IsAttempt"]</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </td>
                        <td class="align-middle text-center">
                            <form asp-action="CallibrationDetails" method="post">
                                <input type="hidden" name="transactionId" value="@transactionId" />
                                <button type="submit" class="btn btn-sm btn-primary" style="background-color:#FF581C;color:wheat">View</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>